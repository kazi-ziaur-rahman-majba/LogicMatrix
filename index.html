<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Email Template Builder - Advanced</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app-shell">
      <!-- Left: Dark sidebar for adding blocks -->
      <aside class="sidebar" aria-label="Blocks sidebar">
        <div class="sidebar-header">
          <div class="sidebar-title">
            <img src="/assets/email.png" alt="Email" class="sidebar-title-icon">
            <span class="sidebar-title-email">Email</span>
            <span class="sidebar-title-template">Template</span>
          </div>
        </div>
        
        <!-- Predefined Content Blocks -->
        <div class="sidebar-section predefined-section">
          <div class="sidebar-section-title">PREDEFINED</div>
          <div class="sidebar-blocks">
            <button class="sidebar-block-btn predefined-block-btn" type="button" data-block-type="header"><span class="sidebar-block-btn-icon predefined-icon">H</span><span>Header</span></button>
            <button class="sidebar-block-btn predefined-block-btn" type="button" data-block-type="hero"><span class="sidebar-block-btn-icon predefined-icon">★</span><span>Hero</span></button>
            <button class="sidebar-block-btn predefined-block-btn" type="button" data-block-type="cta"><span class="sidebar-block-btn-icon predefined-icon">CTA</span><span class="cta-section-text">CTA Section</span></button>
            <button class="sidebar-block-btn predefined-block-btn" type="button" data-block-type="footer"><span class="sidebar-block-btn-icon predefined-icon">F</span><span>Footer</span></button>
          </div>
        </div>

        <!-- Basic Content Blocks -->
        <div class="sidebar-section content-section">
          <div class="sidebar-section-title">CONTENT</div>
          <div class="sidebar-blocks">
            <button class="sidebar-block-btn content-block-btn" type="button" data-block-type="title"><span class="sidebar-block-btn-icon content-icon">T</span><span>Title</span></button>
            <button class="sidebar-block-btn content-block-btn" type="button" data-block-type="subtitle"><span class="sidebar-block-btn-icon content-icon">S</span><span>Subtitle</span></button>
            <button class="sidebar-block-btn content-block-btn" type="button" data-block-type="paragraph"><span class="sidebar-block-btn-icon content-icon">1</span><span>Paragraph</span></button>
            <button class="sidebar-block-btn content-block-btn" type="button" data-block-type="image"><span class="sidebar-block-btn-icon content-icon image-icon">⛰</span><span>Image</span></button>
            <button class="sidebar-block-btn content-block-btn" type="button" data-block-type="button"><span class="sidebar-block-btn-icon content-icon button-icon">◎</span><span>Button</span></button>
          </div>
        </div>

        <!-- Layout Blocks -->
        <div class="sidebar-section layout-section">
          <div class="sidebar-section-title">LAYOUT</div>
          <div class="sidebar-blocks">
            <button class="sidebar-block-btn layout-block-btn" type="button" data-block-type="section"><span class="sidebar-block-btn-icon layout-icon grid-icon">▦</span><span>Section</span></button>
            <button class="sidebar-block-btn layout-block-btn" type="button" data-block-type="two-column"><span class="sidebar-block-btn-icon layout-icon columns-icon">▥</span><span>2 Columns</span></button>
          </div>
        </div>
      </aside>

      <!-- Center: Editor / live preview area -->
      <main class="editor" aria-label="Email editor">
        <header class="editor-header">
          <div class="editor-title">Email Template Builder</div>
          <div class="editor-actions">
            <button id="btnSaveToDatabase" class="btn btn-primary" type="button">Save to Database</button>
            <button id="btnSaveTemplate" class="btn btn-ghost" type="button">Save Template</button>
            <button id="btnClear" class="btn btn-ghost" type="button">Clear</button>
          </div>
        </header>

        <!-- Code Editor View (hidden by default) -->
        <div id="codeEditorView" class="code-editor-view" style="display: none;">
          <div class="code-editor-header">
            <span>HTML Code Editor</span>
            <button id="btnCloseCodeView" class="btn btn-ghost" type="button">Close</button>
          </div>
          <textarea id="htmlCodeEditor" class="html-code-editor"></textarea>
          <div class="code-editor-actions">
            <button id="btnApplyCode" class="btn btn-primary" type="button">Apply Changes</button>
            <button id="btnResetCode" class="btn btn-ghost" type="button">Reset</button>
          </div>
        </div>

        <!-- Canvas View -->
        <section class="canvas-wrap" aria-label="Email preview canvas">
          <div class="canvas-inner">
            <div class="email-frame">
              <div class="email-body">
                <div id="canvas"></div>
                <div id="emptyState" class="empty-state">
                  Start by adding a block from the left sidebar. You can drag blocks to reorder them.
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Auto-save indicator -->
        <div id="autoSaveIndicator" class="auto-save-indicator">Saved</div>
      </main>

      <!-- Right: Settings panel for selected element -->
      <aside class="settings-panel" aria-label="Block settings">
        <div class="settings-header">
          <div>
            <div class="settings-title">Block Settings</div>
            <div class="settings-subtitle" id="settingsSubtitle">
              Select a block to edit its properties.
            </div>
          </div>
        </div>
        <div id="settingsContent" class="settings-content">
          <div class="settings-empty">
            No block selected. Click any block in the email preview to edit its content and style.
          </div>
        </div>
      </aside>
    </div>

    <!-- Template Save Modal -->
    <div id="templateSaveModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Save Template</h3>
          <button class="modal-close" type="button">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Template Name</label>
            <input type="text" id="templateNameInput" class="form-control" placeholder="My Email Template">
          </div>
          <div id="savedTemplatesList" class="saved-templates-list"></div>
        </div>
        <div class="modal-footer">
          <button id="btnConfirmSave" class="btn btn-primary" type="button">Save</button>
        </div>
      </div>
    </div>

    <!-- Save to Database Modal -->
    <div id="saveToDatabaseModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Save to Database</h3>
          <button class="modal-close" type="button">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Template Name</label>
            <input type="text" id="databaseTemplateName" class="form-control" placeholder="My Email Template">
          </div>
          <div class="form-group">
            <label>API Endpoint URL</label>
            <input type="text" id="apiEndpoint" class="form-control" placeholder="https://api.example.com/templates" value="https://api.example.com/templates">
            <div style="font-size: 11px; color: #64748b; margin-top: 4px;">
              Update this URL to point to your backend API endpoint
            </div>
          </div>
          <div id="databaseSaveStatus" style="margin-top: 12px; padding: 12px; border-radius: 6px; display: none;"></div>
        </div>
        <div class="modal-footer">
          <button id="btnConfirmDatabaseSave" class="btn btn-primary" type="button">Save to Database</button>
          <button class="btn btn-ghost modal-close" type="button">Cancel</button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
